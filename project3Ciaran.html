<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link href="grid12.css" rel="stylesheet">
<title> Project </title>
<script type="text/javascript">

  var numGrid = 3;

  var gameOver = false;

  var winner;

  //a 2D array of cells (elements)
  var board = new Array(numGrid);
  for(var i=0; i<numGrid; i++)
    board[i] = new Array(numGrid);
  
  /*
  Evenly divides #container into numGrid rows and numGrid columns of cells
  And store them into board for later access
  */
	function generateCells()
  {
    var container = document.getElementById('container');
    var proportion = 100/numGrid;//percentage of width or height per cell

    for(var i=0; i<numGrid; i++) {
      //create and add row
      var row = document.createElement('div');
      row.style.height = proportion + '%';
      row.className = 'row';
      container.appendChild(row);
      for(var j=0; j<numGrid; j++) {
        //create and add cell
        var cell = document.createElement('div');
        cell.className='cell';
        cell.style.position = 'relative';
        cell.style.float = 'left';
        cell.style.width = proportion + '%';
        cell.setAttribute('onClick','placeX(this)');//just for testing. this line will be removed later.
        row.appendChild(cell);
        //add this cell to board (2D array)
        board[i][j] = cell;
      }
    }
  }

	function placeX(element) {
    if(!gameOver) {
      element.className = 'cell X';
      element.style.lineHeight = container.clientHeight/numGrid + 'px';
      element.innerHTML = 'X';
      winner = detectWin();
    }
  }

  function placeO(element) {
    if(!gameOver) {
      element.className = 'cell O';
      element.style.lineHeight = container.clientHeight/numGrid + 'px';
      element.innerHTML = 'O';
      winner = detectWin();
    }
  }

  /*
  set winner to X and return 'X' if X wins, or set winner to O and return 'O' if O wins. 
  Doesn't change or return anything if nobody wins after this round.
  */
  function detectWin() {
    var Xhori = 0; var Ohori = 0;
    var Xvert = 0; var Overt = 0;
    var Xdiag1 = 0; var Odiag1 = 0;
    var Xdiag2 = 0; var Odiag2 = 0;
    for(var i=0; i<numGrid; i++) {
      //diagonals
      if(board[i][i].innerHTML == 'X') Xdiag1++;
      else if(board[i][i].innerHTML == 'O')Odiag1++;
      if(board[i][numGrid-1-i].innerHTML == 'X') Xdiag2++;
      else if(board[i][numGrid-i-1].innerHTML == 'O')Odiag2++;

      for (var j=0; j<numGrid; j++) {
        //horizontal
        if(board[i][j].innerHTML == 'X') Xhori++;
        else if(board[i][j].innerHTML == 'O')Ohori++;
        //vertical
        if(board[j][i].innerHTML == 'X') Xvert++;
        else if(board[j][i].innerHTML == 'O')Overt++;
      }
      //any horizantal or vertical win, after running this inner loop?
      if(Xhori == numGrid || Xvert == numGrid) {gameOver = true; return 'X';}
      else if(Ohori == numGrid || Overt == numGrid) {gameOver = true; return 'O';}
      //reset horizontal and vertical count variables
      else {Xhori = 0; Ohori = 0; Xvert = 0; Overt = 0;}
    }
    //any diagonal win, after completing the outer loop?
    if(Xdiag1 == numGrid || Xdiag2 == numGrid) {gameOver = true; return 'X';}
    else if(Odiag1 == numGrid || Odiag2 == numGrid) {gameOver = true; return 'O';}
  }

</script>
<style>
  *{
    margin:0;
    padding:0;
  }

  div.cell{
    margin:0;
    padding:0;
    height:100%;
    border:2px solid black;
  }
  div.cell:hover{
    background-color: #ffffcc;
  }

  .X,.O{
    width:100%;
    height:100%;
    font-size:72px;
    text-align:center;
    vertical-align:middle;
  }
  #container{
    width:800px;
    height:600px;
  }
  #title{
    text-align:center;
  }

</style>
</head>
<body onload="generateCells()">
  <div class="container">
    <h3 id="title">A placeholder title</h3>
    <div id="container" class="container-fluid"></div>
  </div>
</body>
</html>